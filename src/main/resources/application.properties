##############################################
# APP CONFIG
##############################################
quarkus.application.name=vium-query
quarkus.http.port=${PORT:8080}

##############################################
# DATABASE CONFIG (Supabase - read-only)
##############################################
quarkus.datasource.db-kind=postgresql
quarkus.datasource.jdbc.url=${DATABASE_URL:jdbc:postgresql://oqepddyxidguqbxycrtm.pooler.supabase.com:6543/postgres?sslmode=require}
quarkus.datasource.username=${DB_USER:app_vium_ro}
quarkus.datasource.password=${DB_PASS:F3d04@-B3ll@-Z@y}
quarkus.datasource.jdbc.max-size=5
quarkus.datasource.jdbc.validation-query-sql=SELECT 1
quarkus.datasource.jdbc.acquisition-timeout=30

##############################################
# HEALTH CHECK CONFIG
##############################################
# Garante logs e validações consistentes no Render
quarkus.datasource.health.enabled=true
quarkus.datasource.jdbc.enable=true
quarkus.datasource.jdbc.idle-removal-interval=60
quarkus.datasource.jdbc.validation-interval=15

##############################################
# OPENAPI / SWAGGER
##############################################
quarkus.smallrye-openapi.path=/openapi
quarkus.swagger-ui.always-include=true
quarkus.swagger-ui.path=/q/swagger-ui

##############################################
# SUPABASE AUTH (JWT)
##############################################
mp.jwt.verify.publickey.location=${SUPABASE_JWKS_URL:https://oqepddyxidguqbxycrtm.supabase.co/auth/v1/keys}
mp.jwt.verify.issuer=${SUPABASE_ISSUER:https://oqepddyxidguqbxycrtm.supabase.co/auth/v1}

##############################################
# CORS CONFIG
##############################################
quarkus.http.cors=true
quarkus.http.cors.origins=${CORS_ORIGINS:*}
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS
quarkus.http.cors.headers=Authorization,Content-Type

##############################################
# EXTRA KEYS (Opcional)
##############################################
MAPS_API_KEY=${MAPS_API_KEY:}
